
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Ocean's Blog</title>
	<meta name="author" content="Ocean">

	
	<meta name="description" content="最近楼里网络故障频繁发生，严重影响各部门的正常工作，作为网管，能快速的解决问题，众望所归，自然压力很大。 故障症状： 两个楼层所有办公室都不能上网，ping不通网关，重启后暂时能上网，时间不等，又会出现网内集体无法上网现象。 网络拓扑结构： 三四楼的网络接入点在三楼， &hellip;">
	

	<link href="/atom.xml" rel="alternate" title="Ocean's Blog" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
	

	
</head>

<body>
	<header id="header" class="inner"><nav><ul>
  <li><a href="/">主页</a></li>
  <li><a href="/blog/archives">文章存档</a></li>
  <li><a href="/blog/categories">文章分类</a></li>
  <li><a href="/blog/about">关于</a></li>
</ul>
</nav>
</header>
	<div id="content" class="inner">


	<article class="post"><header>
  
  <h1 class="title"><a href="/blog/2012/11/05/a-media-converter-fault-caused-by/">一个光纤收发器引发的故障</a></h1>
  
  








	
		<time datetime="2012-11-05T00:00:00+08:00">
			<span class="day"> 5</span><span class="month">Nov</span>
		</time>
	

</header>
<div class="entry-content">
  
    <p>最近楼里网络故障频繁发生，严重影响各部门的正常工作，作为网管，能快速的解决问题，众望所归，自然压力很大。</p>

<h1>故障症状：</h1>

<p>两个楼层所有办公室都不能上网，ping不通网关，重启后暂时能上网，时间不等，又会出现网内集体无法上网现象。</p>

<h1>网络拓扑结构：</h1>

<p>三四楼的网络接入点在三楼，一条100M光纤线路通过光纤收发器接到一个二层交换机，三楼所有办公室的网络都接在这个交换机上，四楼一个二层交换机，线路级联在三楼的二层交换机上。三楼接入点的网关是机房核心交换机的划分的VLan。</p>

<h1>初步判断：</h1>

<ol>
<li>ARP攻击导致，泛洪攻击。</li>
<li>网络环路产生的广播风暴，导致交换机被堵死。</li>
<li>交换机硬件故障。</li>
</ol>


<h1>解决过程：</h1>

<p>先用ARP软件检测是否有攻击，笔记本单独在交换机上接一个端口开着检测软件，查看网络故障后笔记本本地缓存的网关MAC地址，和VLan网关的MAC地址一致，没有被伪造，没有发现有ARP攻击，排除ARP攻击的可能性。
拔掉设备箱里所有网线，交换机上只接笔记本一台设备，故障仍然存在。把笔记本通过网线直接接到光纤收发器，故障仍然存在。而且发现网络故障的时候光纤收发器的TX和RX指示灯长亮不闪烁，可以判断问题出在光纤收发器上，也排除了交换机硬件故障的可能，剩下了就是联系信息中心，更换光纤收发器后，至此故障解决。</p>

  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/network/'>Network</a></div>

    
      
      <a class="comment" href="/blog/2012/11/05/a-media-converter-fault-caused-by/#disqus_thread">Comments</a>
      
      
    
  </footer>
  
</div>
</article>


	<article class="post"><header>
  
  <h1 class="title"><a href="/blog/2012/06/07/ram-host-kvm-the-vps-installation-centos6-2/">RAM Host的KVM VPS安装CentOS6.2</a></h1>
  
  








	
		<time datetime="2012-06-07T00:00:00+08:00">
			<span class="day"> 7</span><span class="month">Jun</span>
		</time>
	

</header>
<div class="entry-content">
  
    <p>RAM Host的VPS由于站长也是Linux技术大牛，做过优化，即使低端配置性能也不错，所以销量一直很好，加上站长不超售的原则，往往一放出就告罄，上周末终于抢到一个。购买的时候因为开着代理，被Ram Host的订单系统检测到当作风险订单处理了，最后发ticket和站长解释了一番天朝的网络环境才订单才得以通过。</p>

<p>这次买的是RAM Host的Premium West Coast Los Angeles Virtual Dedicated Server的Standard VPS，512MB内存，这个机房的VPS都是KVM的，没有部署站长优化过得系统，需要先在VPS管理面板里选择引导安装系统的镜像ISO。</p>

<p><img src="http://nwy.me/wp-content/uploads/2012/06/%E9%80%89%E5%8C%BA_002.png" alt="系统选择" /></p>

<p>VNC连接主机后进Console，需要注意的是VPS管理面板里VM Console页面给的连接端口是随机的。</p>

<p><img src="http://nwy.me/wp-content/uploads/2012/06/QEMU-oceannan-%E5%9C%A8-2012-06-07-003459-%E7%9A%84%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE.png" alt="QEMU (oceannan) 在 2012-06-07 00:34:59 的屏幕截图" /></p>

<p>这部分就不一一截图了，一路空格加回车，然后重启。</p>

<p>登录系统后需要先配置ip，修改对应网卡的网关的配置文件，</p>

<p><code>vi /etc/sysconfig/Network </code></p>

<p>设置本机连接的网关的IP地址,在VPS管理面板里有给出，加入一行：</p>

<p><code>GATEWAY=10.0.0.1</code></p>

<p>修改对应网卡的IP地址的配置文件：</p>

<p><code>vi /etc/sysconfig/Network-scripts/ifcfg-eth0</code></p>

<p>修改以下内容:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">DEVICE</span><span class="o">=</span>eth0 <span class="c">#描述网卡对应的设备别名，例如ifcfg-eth0的文件中它为eth0</span>
</span><span class='line'><span class="nv">BOOTPROTO</span><span class="o">=</span>static <span class="c">#设置网卡获得ip地址的方式，可能的选项为static，dhcp或bootp，分别对应静态指定的 ip地址，通过dhcp协议获得的ip地址，通过bootp协议获得的ip地址</span>
</span><span class='line'><span class="nv">BROADCAST</span><span class="o">=</span>192.168.0.255 <span class="c">#对应的子网广播地址</span>
</span><span class='line'><span class="nv">HWADDR</span><span class="o">=</span>00:03:E8:04:D8:B3 <span class="c">#对应的网卡物理地址</span>
</span><span class='line'><span class="nv">IPADDR</span><span class="o">=</span>192.168.1.2 <span class="c">#如果设置网卡获得 ip地址的方式为静态指定，此字段就指定了网卡对应的ip地址</span>
</span><span class='line'><span class="nv">NETMASK</span><span class="o">=</span>255.255.255.0 <span class="c">#网卡对应的网络掩码</span>
</span><span class='line'><span class="nv">Network</span><span class="o">=</span>192.168.1.0 <span class="c">#网卡对应的网络地址</span>
</span><span class='line'><span class="nv">IPV6INIT</span><span class="o">=</span>no
</span><span class='line'><span class="nv">IPV6_AUTOCONF</span><span class="o">=</span>no
</span><span class='line'><span class="nv">ONBOOT</span><span class="o">=</span>yes <span class="c">#系统启动时是否设置此网络接口，设置为yes时，系统启动时激活此设备</span>
</span></code></pre></td></tr></table></div></figure>


<p>重启网络，使刚才的设置生效。</p>

<p><code>service Network restart</code></p>

<p>至此Centos6.2就安装完成了。</p>

  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/linux/'>Linux</a></div>

    
      
      <a class="comment" href="/blog/2012/06/07/ram-host-kvm-the-vps-installation-centos6-2/#disqus_thread">Comments</a>
      
      
    
  </footer>
  
</div>
</article>


	<article class="post"><header>
  
  <h1 class="title"><a href="/blog/2012/04/05/han-han-addressed-to-each/">韩寒：写给每一个自己</a></h1>
  
  








	
		<time datetime="2012-04-05T00:00:00+08:00">
			<span class="day"> 5</span><span class="month">Apr</span>
		</time>
	

</header>
<div class="entry-content">
  
    <p>　　最近三个月，看世间百态，人情冷暖，失落与收获都颇多。失落在我出生是纯正的上海郊区农村屌丝，无权无势，白手起家，本以为自己是一个很励志的“屌丝的逆袭”的故事，却硬要被说成一个经过多方神秘势力包装的惊天大阴谋，失落在北京有一个几面之交的“名流友人”，莫名编造了一个内幕，四处传播，让我心寒，我愿怀着善意，相信他是无心的吹水；失落在我自己，太过在意，害怕深文周纳，行文变得谨慎。收获在很多谋面和未曾谋面的朋友仗义执言：虽然都被打成利益集团；收获在十几年前的同学为我说话，虽然因为回忆太远往事，细节互相有偏差被打成诈骗团伙；收获在我看到太多人心和各种面目，以后写小说刻画人物会更加精彩。</p>

<p>　　人的处事风格和性格不是一成不变的，尤其是16岁到30岁之间。我写过一些不错的文字，也写了不少烂文章，无论状态起伏，无论风格转变，都是一个人的成长历程，谁人能在十四年的青春里保持纹丝不动。我二十岁出头的时候主张抵制日货，是个民族主义者，08年的时候开始反对抵制家乐福，我小时候主张打仗收复台湾，现在都不好意思承认自己这么说过，十七八岁时，我居然说，活着的作家中，写文章论排名老子天下第二，现在想起来都脸红，更让我脸红的是当年我心中那个第一居然是李敖。我少年时装酷，追求语出惊人，这些话现在看来，很多都惹人厌恶，甚至还惹我自己厌恶，把各种傻话挖出来，总会击中不同的人。谁没有年少过，你在宿舍里说过的那些蠢话，你在树林里幼稚的表白，现在翻出来可不都得笑死，没有人永远和过去的自己一致，除非你不再成长。</p>

<p>　　接触过我的人都知道，我面对生人其实腼腆拘谨。这点从小到现在都未改变。也许我把性格里的另一面都发泄到了赛车和写作中。只要不是被踢走，我在一支车队一效力就是五六年，有合作的地方只要没有意外都会一直合作下去，酒店都选熟悉的住，吃饭永远去那两三家，点的也永远是那几个菜。我性格就是这样。也许因为我选择走的道路太不一样，充满未知，所以我很希望在日常生活里没有变故，不再有陌生的事物。我口才不算好，有人把我十几二十岁时的电视采访都挖了出来，挑了回答的差的问题和木讷的地方拼接在一起，以验证我是一个草包。</p>

<p>　　是的，大家尽可以挖苦我，嘲弄我，也许有的人在二十来岁的时候上电视能出口成章泰然自若，比我强很多。今天我知道了口无遮拦的代价，知道了年少轻狂的代价，知道了直来直去的代价，知道了不设城府的代价，但明天我还会这样说话，外交辞令永远不会出现在我的嘴里。我在很多地方笨拙，嘴皮子也耍不好，所以我选择了写东西。面对键盘，我拥有我自己的世界，就像我倒车经常撞，停车老停歪，但戴上头盔，坐进赛车，我依然是个好的车手。这就是我的性格。人的性格未必一面，也未必必须符合其他人的设定。每个人的境遇和脾性都是不同的。你不能拿着标尺先裁量自己，再去宣判每个与你尺码不同的他人是伪劣产品。</p>

<p>　　我反智么？是的，我反弱智，我还反各种束缚人的体制。我学历低，学识差，也有很多的缺点。我有恶趣味，但我最怕无趣，我口无遮拦，但我最恨道貌岸然。我常说错话，得罪人，也常道歉反思。此番我又发现我17岁的书中有一句话错了，那就是七门红灯，照亮我的前程一一红灯永远不能照亮你的前程，照亮你前程的，是你的才能。在很多的采访里，我常说一句话：人，可以不上学，但一定不能停止学习。我也常说，为了避免早期作品中模仿他人的痕迹太重这个缺点，我不再看其他人的小说，但一定不能停止阅读，只有阅读，才会进步。硬要控制信息，断章取义，我也没有办法，也许我们读着不一样的书，走着不一样的路。我只是选择了做自己喜欢的事情，为了写作，我影响了学业，最后退学，为了赛车，我又几乎放弃写作，不计代价，孤注一掷，我运气好，都做的不差。</p>

<p>　　电脑前的每一个人，我相信造物者一定赋予你们特殊的才能，很多人只是没有发现而已。也许此刻，有很多莫扎特正在编程序，很多舒马赫正在写文案，很多张曼玉正在当前台，很多李开复正在做中介。我只是比很多人幸运，找到了自己喜欢又适合的。同时我也有很多比你们蠢笨的地方，怎么学都学不会。每一个人，纵然缺点一身，但必然有一些地方是长于他人的，那是你区别于他人的标记，也是造物者公平的地方，就看你能否找到这些标记。</p>

<p>　　没人能让所有人满意，所以让自己和你中意的人满意就可以。你所判定的一切，也许就是你自己内心的投影。人生就是一个不断接纳和抛弃的过程，就是一段迎接冷眼嘲笑孤独前行的旅途。KO不了你的，也许让你更OK,没让你倒下的，也许让你更强大。我也将尽我所能，向在乎我的人创造各种东西，绝不向厌恶我的人解释这是个什么东西。</p>

<p>　　最后我想到一部电影的结尾。朋友们，愿你带走我身上你们中意的那一部分，踩两脚讨厌的那部分。当你站在城墙上，拥抱着你所喜爱的那部分，回头看到人群里背身远去那个叫韩寒的家伙，不妨说一句，那个人样子好怪，他好像一条狗诶。</p>

<p>来源: 作者博客 | 来源日期：2012-4-5</p>

  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/other/'>Other</a></div>

    
      
      <a class="comment" href="/blog/2012/04/05/han-han-addressed-to-each/#disqus_thread">Comments</a>
      
      
    
  </footer>
  
</div>
</article>


	<article class="post"><header>
  
  <h1 class="title"><a href="/blog/2011/11/27/ext4-partition-under-linux-format-to-recover-deleted-files/">Linux下ext4分区格式恢复删除文件</a></h1>
  
  








	
		<time datetime="2011-11-27T00:00:00+08:00">
			<span class="day">27</span><span class="month">Nov</span>
		</time>
	

</header>
<div class="entry-content">
  
    <p>作为键盘党，下午在用键盘选择文件夹的时候，没有盯对文件夹就shift+delete删除了一个重要文件夹，之前就发生过丢失数据的悲剧，于是给笔记本增加了一块硬盘，重要数据定时同步到光驱位硬盘，不过今天误删除的文件夹还没同步到光驱位硬盘。在ext2分区格式下有许多文件恢复软件，但是这些软件都不支持ext4，或兼容的不太好，如testdisk，虽然可以看到误删的文件但是恢复出来的文件是损坏的。最后通过一番搜索找到了一款支持ext4的的恢复软件extundelete。</p>

<p>安装extundelete，可以去软件主页http://extundelete.sourceforge.net下载编译，或者从服务器获取，不同的发行版的安装方法不同，这里不再详述。</p>

<p>extundelete &#8211;help 查看软件帮助</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Usage: extundelete <span class="o">[</span>options<span class="o">]</span> <span class="o">[</span>--<span class="o">]</span> device-file
</span><span class='line'>Options:
</span><span class='line'>  --version, -<span class="o">[</span>vV<span class="o">]</span>       Print version and <span class="nb">exit </span>successfully.
</span><span class='line'>  --help,                Print this <span class="nb">help </span>and <span class="nb">exit </span>successfully.
</span><span class='line'>  --superblock           Print contents of superblock in addition to the rest.
</span><span class='line'>                         If no action is specified <span class="k">then </span>this option is implied.
</span><span class='line'>  --journal              Show content of journal.
</span><span class='line'>  --after dtime          Only process entries deleted on or after <span class="s1">&#39;dtime&#39;</span>.
</span><span class='line'>  --before dtime         Only process entries deleted before <span class="s1">&#39;dtime&#39;</span>.
</span><span class='line'>Actions:
</span><span class='line'>  --inode ino            Show info on inode <span class="s1">&#39;ino&#39;</span>.
</span><span class='line'>  --block blk            Show info on block <span class="s1">&#39;blk&#39;</span>.
</span><span class='line'>  --restore-inode ino<span class="o">[</span>,ino,...<span class="o">]</span>
</span><span class='line'>                         Restore the file<span class="o">(</span>s<span class="o">)</span> with known inode number <span class="s1">&#39;ino&#39;</span>.
</span><span class='line'>                         The restored files are created in ./RESTORED_FILES
</span><span class='line'>                         with their inode number as extension <span class="o">(</span>ie, file.12345<span class="o">)</span>.
</span><span class='line'>  --restore-file <span class="s1">&#39;path&#39;</span>  Will restore file <span class="s1">&#39;path&#39;</span>. <span class="s1">&#39;path&#39;</span> is relative to root
</span><span class='line'>                         of the partition and does not start with a <span class="s1">&#39;/&#39;</span> <span class="o">(</span>it
</span><span class='line'>                         must be one of the paths returned by --dump-names<span class="o">)</span>.
</span><span class='line'>                         The restored file is created in the current
</span><span class='line'>                         directory as <span class="s1">&#39;RECOVERED_FILES/path&#39;</span>.
</span><span class='line'>  --restore-files <span class="s1">&#39;path&#39;</span> Will restore files which are listed in the file <span class="s1">&#39;path&#39;</span>.
</span><span class='line'>                         Each filename should be in the same format as an option
</span><span class='line'>                         to --restore-file, and there should be one per line.
</span><span class='line'>  --restore-all          Attempts to restore everything.
</span><span class='line'>  -j journal             Reads an external journal from the named file.
</span><span class='line'>  -b blocknumber         Uses the backup superblock at blocknumber when opening
</span><span class='line'>                         the file system.
</span><span class='line'>  -B blocksize           Uses blocksize as the block size when opening the file
</span><span class='line'>                         system.  The number should be the number of bytes.
</span></code></pre></td></tr></table></div></figure>


<p>软件支持根据时间，文件路径，inode恢复删除的文件，这里指定文件路径恢复误删文件</p>

<p>根据文件路径恢复也有多种方式，如下：</p>

<p>恢复/dev/sda3里一个被误删除的文件</p>

<p><code>
extundelete /dev/sda3 --restore-file /an/important/file
</code></p>

<p>恢复/dev/sda3里一个被误删除的文件夹</p>

<p><code>
extundelete /dev/sda3 --restore-directory /an/important
</code></p>

<p>恢复/dev/sda3里所有被删除的东西</p>

<p><code>
extundelete /dev/sda3 --restore-all
</code></p>

<p>extundelete恢复误删除的文件不需要进入live环境，也不需要umount误删文件所在分区，运行命令后会在你运行命令的目录下产生一个RECOVERED_FILES/的目录，恢复的文件会按照原来的路径创建在该路径下面，所以做恢复操作的时候一定要把终端路径切换到其他分区下，不能在当前误删文件所在分区操作，否则恢复出来的文件会覆盖误删除的文件，导致恢复出来的部分或全部文件损坏。</p>

  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/linux/'>Linux</a></div>

    
      
      <a class="comment" href="/blog/2011/11/27/ext4-partition-under-linux-format-to-recover-deleted-files/#disqus_thread">Comments</a>
      
      
    
  </footer>
  
</div>
</article>


	<article class="post"><header>
  
  <h1 class="title"><a href="/blog/2011/09/19/archlinux-development-platform-to-build-next-webos/">Arch Linux下webOS开发平台的搭建</a></h1>
  
  








	
		<time datetime="2011-09-19T00:00:00+08:00">
			<span class="day">19</span><span class="month">Sep</span>
		</time>
	

</header>
<div class="entry-content">
  
    <p>作为一个02年开始使用palm的资深palm用户，对palm有着根深蒂固的感情。在palm的陪伴下，经历了高中大学的学生时代，步入社会，开始工作。palm曾经的辉煌也一去不复返，在这个物质，浮躁，快速化的世界，palm系统的单线程，简洁的特性在全球网络化的时代逐渐淡出人们的视线，随后palm公司发布了webOS，被惠普公司收购。发现跑题已经是我写技术文章的特色之一了，言归正传。</p>

<p>在webOS的开发网站上，针对linux环境只提供了ubuntu发行版的驱动和SDK，而我在几个月前从ubuntu阵营转向简洁轻巧的archlinux阵营。两者采用不通的包管理机制。为了让archlinux识别palm pre，需要先安装设备驱动，既然官方没有不提供，尝试用deb2targz转换失败后，只好自己动手解开deb格式的驱动，通过谷歌了解了一下deb的制作方法后，大概理解了deb的安装方式，解压出来的deb包目录下，将data目录的文件按照文件路径名复制到archlinux对应的目录下，control目录下的postinst文件是安装脚本，如下</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/sh</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># kill and remove OLD novacomd upstart</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -e /etc/event.d/novacomd <span class="o">]</span> ; <span class="k">then</span>
</span><span class='line'>stop novacomd
</span><span class='line'>rm -f /etc/event.d/novacomd
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># remove novacomd from /usr/local/bin</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -e /usr/local/bin/novacomd <span class="o">]</span> ; <span class="k">then</span>
</span><span class='line'>rm -f /usr/local/bin/novacomd
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># check for new upstart</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -e /etc/init/rc.conf <span class="o">]</span> ; <span class="k">then</span>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> -e /etc/init/palm-novacomd.conf <span class="o">]</span> ; <span class="k">then</span>
</span><span class='line'>rm -f /etc/init/palm-novacomd.conf
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>cp -a  /opt/Palm/novacom/scripts/novacomd-conf    /etc/init/palm-novacomd.conf
</span><span class='line'><span class="k">elif</span> <span class="o">[</span> -e /etc/event.d <span class="o">]</span> ; <span class="k">then</span>
</span><span class='line'>ln -fs /opt/Palm/novacom/scripts/novacomd-upstart /etc/event.d/palm-novacomd
</span><span class='line'><span class="k">fi</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># (re)start novacomd</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'>stop palm-novacomd <span class="o">||</span> <span class="nb">true</span>
</span><span class='line'>killall -v -q novacomd
</span><span class='line'>start palm-novacomd <span class="o">||</span> <span class="nb">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>直接运行脚本显然是不行的，archlinux没有/etc/init/和/etc/event.d/目录，/etc/init/实际是指向/etc/rc.d/int.d/的一个符号链接文件，/etc/event.d/是ubuntu特有的upstart机制的核心目录，archlinux的服务可以通过特有的rc.conf启动，也可以通过/etc/init.d/或者/etc/rc.d/下建立脚本创建服务。了解脚本后将novacomd复制到/etc/rc.d/,novacomd.conf复制到/etc/conf.d/做完archlinux下的改动后，在终端里输入</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>/etc/rc.d/novacom start
</span></code></pre></td></tr></table></div></figure>


<p>提示未找的设备，谷歌一番后在http://www.webos-internals.org/wiki/Accessing_Linux_archlinux 上发现解决方法:&#8221;novacomd doesn&#8217;t work under archlinux , so we have to use ubuntu&#8217;s libusb. &#8220;意想不到的是wiki中给出了一条简便方法，从aur下载网友打包好的novacom驱动，汗，之前怎么没有想到在aur里搜索一下。</p>


  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/linux/'>Linux</a><a class='category' href='/blog/categories/personal/'>Personal</a></div>

    
      
      <a class="comment" href="/blog/2011/09/19/archlinux-development-platform-to-build-next-webos/#disqus_thread">Comments</a>
      
      
    
  </footer>
  
</div>
</article>


	<article class="post"><header>
  
  <h1 class="title"><a href="/blog/2011/09/07/the-future-of-mobile-phones-should-be-like/">未来的手机应该是这样的</a></h1>
  
  








	
		<time datetime="2011-09-07T00:00:00+08:00">
			<span class="day"> 7</span><span class="month">Sep</span>
		</time>
	

</header>
<div class="entry-content">
  
    <div class="video-container">
    <embed src="http://player.youku.com/player.php/sid/XMTkyNDg3Nzgw/v.swf" allowfullscreen="true" quality="high" width="540" height="420" align="middle" allowscriptaccess="always" type="application/x-shockwave-flash"></embed>       
</div>


  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/other/'>Other</a></div>

    
      
      <a class="comment" href="/blog/2011/09/07/the-future-of-mobile-phones-should-be-like/#disqus_thread">Comments</a>
      
      
    
  </footer>
  
</div>
</article>


	<article class="post"><header>
  
  <h1 class="title"><a href="/blog/2011/08/26/gregarius-5-5-feed-garbled-date/">Gregarius 5.5 Feed更新日期乱码问题</a></h1>
  
  








	
		<time datetime="2011-08-26T00:00:00+08:00">
			<span class="day">26</span><span class="month">Aug</span>
		</time>
	

</header>
<div class="entry-content">
  
    <p>之前安装Gregarius的时候就注意到页面footer部分显示的feed更新时间会乱码，Gregarius对中文的支持很差，后台问题更多。</p>

<p>解决方法：找到util.php文件，做如下改动：</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="x">function rss_locale_date ($fmt, $ts, $addTZOffset = true) {</span>
</span><span class='line'><span class="x">    if (isset($_SERVER[&quot;WINDIR&quot;])) {</span>
</span><span class='line'><span class="x">            //%e doesnt’ exists under windows!</span>
</span><span class='line'><span class="x">            $fmt=str_replace(&quot;%e&quot;,&quot;%#d&quot;,$fmt);</span>
</span><span class='line'><span class="x">        }</span>
</span><span class='line'><span class="x">     </span>
</span><span class='line'><span class="x">    if ($addTZOffset) {</span>
</span><span class='line'><span class="x">            return iconv(&quot;UTF-8&quot;, &quot;utf-8&quot;, strftime($fmt, $ts +3600 * getConfig </span>
</span><span class='line'><span class="x">    (‘rss.config.tzoffset’)));</span>
</span><span class='line'><span class="x">        }   </span>
</span><span class='line'><span class="x">        return iconv(&quot;UTF-8&quot;, &quot;utf-8&quot;, strftime($fmt, $ts));</span>
</span><span class='line'><span class="x">        //return utf8_encode(strftime($fmt, $ts));</span>
</span><span class='line'><span class="x">}</span>
</span></code></pre></td></tr></table></div></figure>




  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/php/'>PHP</a></div>

    
      
      <a class="comment" href="/blog/2011/08/26/gregarius-5-5-feed-garbled-date/#disqus_thread">Comments</a>
      
      
    
  </footer>
  
</div>
</article>


	<article class="post"><header>
  
  <h1 class="title"><a href="/blog/2011/08/18/untitled/">无题</a></h1>
  
  








	
		<time datetime="2011-08-18T00:00:00+08:00">
			<span class="day">18</span><span class="month">Aug</span>
		</time>
	

</header>
<div class="entry-content">
  
    <p>预感有悲剧要发生了，网站本月的15G带宽流量截止今天已经用掉了11.5G，今天才十八号，距月底还有十二天。看了下了访问统计，似乎是CDN服务器消耗掉的，奇怪的是消耗掉的流量主要集中在一个页面。先观察，等月底流量不够再移除这个页面。</p>

<p><img src="http://nwy.me/wp-content/uploads/2011/08/traffic_001.png" alt="traffic_001" /></p>


  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/personal/'>Personal</a></div>

    
      
      <a class="comment" href="/blog/2011/08/18/untitled/#disqus_thread">Comments</a>
      
      
    
  </footer>
  
</div>
</article>


	<article class="post"><header>
  
  <h1 class="title"><a href="/blog/2011/08/07/youth-leadership-famous-editor-wang-sledgehammer-soul-masters-teaching-for-young-people/">青年领袖灵魂大师王大锤对青年人的教诲</a></h1>
  
  








	
		<time datetime="2011-08-07T00:00:00+08:00">
			<span class="day"> 7</span><span class="month">Aug</span>
		</time>
	

</header>
<div class="entry-content">
  
    <ol>
<li><p>他们只会否定。低头看书，抬头看世界，看到不爽就唧唧歪歪。但他们没有社会经验，所以唧唧歪歪起来很烦人，因为那点阅读量的加持，得比德比的，还头头是道，要是有个人帮我cei死丫就太好了。</p></li>
<li><p>看问题基本上都是消极的。说好听是怀疑精神，说难听点就是啥都不会做。还给人添堵。</p></li>
<li><p>什么都看不惯，什么都看不上眼。情商不高，耍小聪明。</p></li>
</ol>


<p>标题有些无厘头，王大锤是论坛里一网友的马甲，大师级别的人物，马甲的名字都起的这么德味<sup>_<sup>,据称做过季羡林的编辑，&#8221;青年领袖&#8221;&#8220;灵魂大师&#8221;也是论坛里的网友给他的称谓。</sup></sup></p>

<p>发现自己三条毛病都有，特转发此文，告诫自己。</p>

<p>PS:上个月换了网络环境，发现被ISP劫持，因为用Fx+Autoproxy，所以就没有注意，后来发现网络中断后再连接的时候会推送广告，无法忍受，果断登录路由指定DNS为Google的DNS，于是世界清静了。需要指出的是用Google的DNS是不能翻墙的，DNS的UDP包也是会被墙劫持篡改的。</p>

  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/personal/'>Personal</a></div>

    
      
      <a class="comment" href="/blog/2011/08/07/youth-leadership-famous-editor-wang-sledgehammer-soul-masters-teaching-for-young-people/#disqus_thread">Comments</a>
      
      
    
  </footer>
  
</div>
</article>


	<article class="post"><header>
  
  <h1 class="title"><a href="/blog/2011/07/24/programmers-technical-leveling-guide/">程序员技术练级攻略</a></h1>
  
  








	
		<time datetime="2011-07-24T00:00:00+08:00">
			<span class="day">24</span><span class="month">Jul</span>
		</time>
	

</header>
<div class="entry-content">
  
    <p>文章作者： <a title="由 陈皓 发布" href="http://coolshell.cn/articles/author/haoel" rel="author">陈皓</a> 转载出处：<a href="http://coolshell.cn/articles/4990.html">http://coolshell.cn/articles/4990.html</a></p>

<p>月光博客6月12日发表了《<a href="http://www.williamlong.info/archives/2700.html" target="_blank">写给新手程序员的一封信</a>》，翻译自《<a href="http://blog.akash.im/an-open-letter-to-those-who-want-to-start" target="_blank">An open letter to those who want to start programming</a>》，我的朋友（他在本站的id是<a href="http://coolshell.cn/?author=3" target="_blank">Mailper</a>）告诉我，他希望在酷壳上看到一篇更具操作性的文章。因为他也是喜欢编程和技术的家伙，于是，我让他把他的一些学习Python和Web编程的一些点滴总结一下。于是他给我发来了一些他的心得和经历，我在把他的心得做了不多的增改，并根据我的经历增加了“进阶”一节。<strong>这是一篇由新手和我这个老家伙根据我们的经历完成的文章</strong>。</p>

<p>我的这个朋友把这篇文章取名叫Build Your Programming Technical Skills，我实在不知道用中文怎么翻译，但我在写的过程中，<strong>我觉得这很像一个打网游做任务升级的一个过程，所以取名叫“技术练级攻略”，题目有点大，呵呵，这个标题纯粹是为了好玩</strong>。<strong>这里仅仅是在分享Mailper和我个人的学习经历。</strong>（注：省去了我作为一个初学者曾经学习过的一些技术(今天明显过时了)，如：Delphi/Power builder，也省去了我学过的一些我觉得没意思的技术Lotus Notes/ActiveX/COM/ADO/ATL/.NET ……）</p>

<h4>前言</h4>


<p>你是否觉得自己从学校毕业的时候只做过小玩具一样的程序？<wbr>走入职场后哪怕没有什么经验也可以把以下这些课外练习走一遍（朋友的抱怨：学校课程总是从理论出发，</wbr><wbr>作业项目都看不出有什么实际作用，不如从工作中的需求出发）</wbr></p>

<p>建议：</p>

<ul>
<li>不要乱买书，不要乱追新技术新名词，<wbr>基础的东西经过很长时间积累而且还会在未来至少10年通用。</wbr>
</li>
    <li>回顾一下历史，看看历史上时间线上技术的发展，你才能明白明天会是什么样。</li>
    <li>一定要动手，例子不管多么简单，<wbr>建议至少自己手敲一遍看看是否理解了里头的细枝末节。</wbr>
</li>
    <li>一定要学会思考，思考为什么要这样，而不是那样。还要举一反三地思考。</li>
</ul>


<p><strong>注</strong>：你也许会很奇怪为什么下面的东西很偏Unix/Linux，这是因为我觉得Windows下的编程可能会在未来很没有前途，原因如下：</p>

<p> </p>

<ul>
<li>现在的用户界面几乎被两个东西主宰了，1）Web，2）移动设备iOS或Android。Windows的图形界面不吃香了。</li>
    <li>越来越多的企业在用成本低性能高的Linux和各种开源技术来构架其系统，Windows的成本太高了。</li>
    <li>微软的东西变得太快了，很不持久，他们完全是在玩弄程序员。详情参见《<a title="Windows编程革命简史" href="http://coolshell.cn/articles/3008.html" target="_blank">Windows编程革命史</a>》</li>
</ul>


<p>所以，我个人认为以后的趋势是前端是Web+移动，后端是Linux+开源。开发这边基本上没Windows什么事。</p>

<h4>启蒙入门</h4>


<p><strong>1、 学习一门脚本语言，例如Python/Ruby</strong></p>

<p>可以让你摆脱对底层语言的恐惧感，脚本语言可以让你很快开发出能用得上的小程序。实践项目:</p>

<ul>
<li>处理文本文件，或者csv (关键词 python csv, python open, python sys) 读一个本地文件，逐行处理（例如 word count，或者处理log）</li>
    <li>遍历本地文件系统 (sys, os, path)，例如写一个程序统计一个目录下所有文件大小并按各种条件排序并保存结果</li>
    <li>跟数据库打交道 (python sqlite)，写一个小脚本统计数据库里条目数量</li>
    <li>学会用各种print之类简单粗暴的方式进行调试</li>
    <li>学会用Google (phrase, domain, use reader to follow tech blogs)</li>
</ul>


<p>为什么要学脚本语言，因为他们实在是太方便了，很多时候我们需要写点小工具或是脚本来帮我们解决问题，你就会发现正规的编程语言太难用了。</p>

<p><strong>2、 用熟一种程序员的编辑器(不是IDE) 和一些基本工具</strong></p>

<ul>
<li>Vim / Emacs / Notepad++，学会如何配置代码补全，外观，外部命令等。</li>
    <li>Source Insight (或 ctag)</li>
</ul>


<p>使用这些东西不是为了Cool，而是这些编辑器在查看、修改代码/配置文章/日志会更快更有效率。</p>

<p><strong>3、 熟悉Unix/Linux Shell和常见的命令行</strong></p>

<ul>
<li>如果你用windows，至少学会用虚拟机里的linux， vmware player是免费的，装个Ubuntu吧</li>
    <li>一定要少用少用图形界面。</li>
    <li>学会使用man来查看帮助</li>
    <li>文件系统结构和基本操作 ls/chmod/chown/rm/find/ln/cat/mount/mkdir/tar/gzip …</li>
    <li>学会使用一些文本操作命令 sed/awk/grep/tail/less/more …</li>
    <li>学会使用一些管理命令 ps/top/lsof/netstat/kill/tcpdump/iptables/dd…</li>
    <li>了解/etc目录下的各种配置文章，学会查看/var/log下的系统日志，以及/proc下的系统运行信息</li>
    <li>了解正则表达式，使用正则表达式来查找文件。</li>
</ul>


<p>对于程序员来说Unix/Linux比Windows简单多了。（参看我四年前CSDN的博文《<a href="http://blog.csdn.net/haoel/article/details/1533720" target="_blank">其实Unix很简单</a>》）学会使用Unix/Linux你会发现图形界面在某些时候实在是太难用了，相当地相当地降低工作效率。</p>

<p><strong>4、 学习Web基础（HTML/CSS/JS) + 服务器端技术 (LAMP)</strong></p>

<p>未来必然是Web的世界，学习WEB基础的最佳网站是<a href="http://www.w3school.com.cn/" target="_blank">W3School</a>。</p>

<ul>
<li>学习HTML基本语法</li>
    <li>学习CSS如何选中HTML元素并应用一些基本样式（关键词：box model）</li>
    <li>学会用  Firefox + Firebug 或 chrome 查看你觉得很炫的网页结构，并动态修改。</li>
    <li>学习使用Javascript操纵HTML元件。理解DOM和动态网页（<a href="http://oreilly.com/catalog/9780596527402" target="_blank">http://oreilly.com/catalog/9780596527402</a>) 网上有免费的章节，足够用了。或参看 <a href="http://www.w3school.com.cn/htmldom/index.asp" target="_blank">DOM</a> 。</li>
    <li>学会用  Firefox + Firebug 或 chrome 调试Javascript代码（设置断点，查看变量，性能，控制台等）</li>
    <li>在一台机器上配置<a href="http://coolshell.cn/articles/www.apache.org" target="_blank">Apache </a>或 <a href="http://coolshell.cn/articles/nginx.net" target="_blank">Nginx</a>
</li>
    <li>学习<a href="http://coolshell.cn/articles/www.php.net" target="_blank">PHP</a>，让后台PHP和前台HTML进行数据交互，对服务器相应浏览器请求形成初步认识。实现一个表单提交和反显的功能。</li>
    <li>把PHP连接本地或者远程数据库 MySQL（MySQL 和 SQL现学现用够了）</li>
    <li>跟完一个名校的网络编程课程（例如：<a href="http://www.stanford.edu/%7Eouster/cgi-bin/cs142-fall10/index.php" target="_blank">http://www.stanford.edu/~ouster/cgi-bin/cs142-fall10/index.php</a> ) 不要觉得需要多于一学期时间，大学生是全职一学期选3-5门课，你业余时间一定可以跟上</li>
    <li>学习一个javascript库（例如jQuery 或 ExtJS）+  Ajax (异步读入一个服务器端图片或者数据库内容）+JSON数据格式。</li>
    <li>HTTP: The Definitive Guide 读完前4章你就明白你每天上网用浏览器的时候发生的事情了(proxy, gateway, browsers)</li>
    <li>做个小网站（例如：一个小的留言板，支持用户登录，Cookie/Session，增、删、改、查，上传图片附件，分页显示）</li>
    <li>买个域名，租个空间，做个自己的网站。</li>
</ul>


<h4>

  
  
  <footer class="meta">
    



	<div class="tags"><a class='category' href='/blog/categories/other/'>Other</a></div>

    
      
      <a class="comment" href="/blog/2011/07/24/programmers-technical-leveling-guide/#disqus_thread">Comments</a>
      
      
    
  </footer>
  
</div>
</article>


<nav id="pagenavi">
	
	<a href="/blog/page/2/" class="next alignright">Next</a>
 <div class="clearfix"></div>
</nav>
</div>
	<footer id="footer" class="inner"><div class="social alignright">
	
	
	
	
	
	<a class="rss" href="/atom.xml" title="RSS">RSS</a>
</div>
<p>&copy; 2013 Ocean</p>
<div class="clearfix"></div>
<div style="display:none"> <script src="http://s6.cnzz.com/stat.php?id=5256345&web_id=5256345" language="JavaScript"></script> </div>
</footer>
	<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
	(function($){
		$('.entry-content').each(function(i){
			var _i = i;
			$(this).find('img').each(function(){
				var alt = $(this).attr('alt');

				if (alt == '' || typeof alt == 'undefined'){
					$(this).wrap('<a href="'+$(this).attr('src')+'" class="fancybox" rel="gallery'+_i+'" />');
				} else {
					$(this).after('<span class="caption">'+alt+'</span>').wrap('<a href="'+$(this).attr('src')+'" class="fancybox" title="'+alt+'" rel="gallery'+_i+'" />');
				}
			});
		});
		$('.fancybox').fancybox();
	})(jQuery);
</script>
<div id="phasebeam">
	<canvas></canvas>
	<canvas></canvas>
	<canvas></canvas>
</div>
<script src="/javascripts/phasebeam.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'oceanblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



</body>
</html>